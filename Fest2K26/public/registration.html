<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Registration – FESTRONIX 2.0 (aligned with events)</title>
    
    <!-- BOOTSTRAP 5 + ICONS + FONTS – O(1) LAYOUT -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Orbitron:wght@400;600;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ========== O(1) THEME – minimal, direct, no complex loops ========== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* ----- VIDEO BACKGROUND ----- */
        .video-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            overflow: hidden;
        }
        .video-background video {
            width: 100%; height: 100%; object-fit: cover;
        }
        .video-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 1;
        }
        
        /* ----- MAIN CONTAINER – BOOTSTRAP OVERRIDES O(1) ----- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
        }
        
        /* ----- HEADER ----- */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 2px solid #ff9966;
            box-shadow: 0 0 30px rgba(255,153,102,0.3);
        }
        .header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            color: #ff9966;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        .header p { color: #ffcc33; font-size: 1.2rem; }
        .info-item {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 20px; background: rgba(255,153,102,0.1);
            border-radius: 10px; border: 1px solid rgba(255,153,102,0.3);
        }
        
        /* ----- FORM CONTAINER (GLASS) ----- */
        .form-container {
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            border: 2px solid rgba(255,153,102,0.3);
            box-shadow: 0 0 40px rgba(255,153,102,0.2);
        }
        .form-header h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: #ff9966;
            margin-bottom: 10px;
        }
        .google-form-wrapper {
            width: 100%;
            min-height: 800px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            overflow: hidden;
        }
        .google-form-wrapper iframe {
            width: 100%;
            height: 800px;
            border: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        /* ----- PROGRESS STEPS (O(1) no loops) ----- */
        .step-circle {
            width: 50px; height: 50px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 1.2rem;
        }
        .step-circle.completed {
            background: linear-gradient(145deg, #ff9966, #ff6600);
            color: white; box-shadow: 0 0 20px rgba(255,153,102,0.5);
        }
        .step-circle.current {
            background: rgba(255,153,102,0.2); border: 2px solid #ff9966; color: #ff9966;
        }
        .step-circle.pending {
            background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); color: #ccc;
        }
        .step-line {
            width: 100px; height: 3px; background: rgba(255,255,255,0.2);
        }
        .step-line.completed { background: linear-gradient(90deg, #ff9966, #ff6600); }
        
        /* ----- BUTTONS ----- */
        .btn-back {
            background: transparent; border: 2px solid #ff9966; color: #ff9966;
            padding: 12px 30px; border-radius: 10px; font-weight: 600;
            transition: 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 10px;
        }
        .btn-back:hover { background: rgba(255,153,102,0.1); transform: translateX(-5px); color: #ffcc33; }
        .btn-submit {
            background: linear-gradient(145deg, #ff9966, #ff6600); color: white;
            padding: 12px 30px; border: none; border-radius: 10px; font-weight: 600;
            transition: 0.3s; box-shadow: 0 5px 20px rgba(255,153,102,0.3);
        }
        .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255,153,102,0.5); }
        
        /* ----- INSTRUCTIONS ----- */
        .form-instructions {
            margin-top: 30px; padding: 25px;
            background: rgba(255,153,102,0.1); border-radius: 15px;
            border: 1px solid rgba(255,153,102,0.3);
        }
        .instructions-list li {
            padding: 8px 0; color: #fff; display: flex; align-items: center; gap: 10px;
        }
        .instructions-list li i { color: #ff9966; }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2.5rem; }
            .form-header h2 { font-size: 2rem; }
            .google-form-wrapper iframe { height: 600px; }
            .step-line { width: 50px; }
        }
        @media (max-width: 480px) {
            .header h1 { font-size: 2rem; }
            .form-header h2 { font-size: 1.8rem; }
            .google-form-wrapper iframe { height: 500px; }
            .step-line { width: 30px; }
        }
    </style>
</head>
<body>
    <!-- VIDEO BACKGROUND -->
    <div class="video-background">
        <video autoplay muted loop playsinline>
            <source src="light.mp4" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
    </div>

    <!-- MAIN CONTENT – BOOTSTRAP GRID O(1) -->
    <div class="container">
        <!-- HEADER CARD -->
        <div class="header">
            <h1>FESTRONIX 2.0</h1>
            <p class="text-warning">Official Registration Form</p>
            <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
                <div class="info-item">
                    <i class="fas fa-calendar-alt text-warning"></i>
                    <span id="eventDate" class="text-white">24-25 March 2026</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock text-warning"></i>
                    <span id="eventTime" class="text-white">9:00 AM - 6:00 PM</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt text-warning"></i>
                    <span id="eventVenue" class="text-white">Main Auditorium</span>
                </div>
            </div>
        </div>

        <!-- PROGRESS INDICATOR – O(1) constant steps -->
        <div class="d-flex align-items-center justify-content-center gap-2 gap-md-4 flex-wrap mb-5">
            <div class="text-center">
                <div class="step-circle completed mx-auto">
                    <i class="fas fa-check"></i>
                </div>
                <span class="step-label d-block mt-2 text-secondary">Instructions</span>
            </div>
            <div class="step-line completed"></div>
            <div class="text-center">
                <div class="step-circle current mx-auto">2</div>
                <span class="step-label d-block mt-2 text-secondary">Registration</span>
            </div>
            <div class="step-line"></div>
            <div class="text-center">
                <div class="step-circle pending mx-auto">3</div>
                <span class="step-label d-block mt-2 text-secondary">Confirmation</span>
            </div>
        </div>

        <!-- FORM CONTAINER -->
        <div class="form-container">
            <div class="form-header text-center mb-4">
                <div class="category-icon fs-1 text-warning" id="categoryIcon">
                    <i class="fas fa-code"></i>
                </div>
                <h2 id="eventTitle">Event Registration</h2>
                <p id="eventDescription" class="text-white-50">Fill out the form below to complete your registration</p>
            </div>

            <!-- GOOGLE FORM IFRAME -->
            <div class="google-form-wrapper">
                <iframe id="googleFormIframe" 
                        src="about:blank"
                        frameborder="0" 
                        marginheight="0" 
                        marginwidth="0"
                        title="Google Form"
                        onload="this.style.opacity=1;">
                </iframe>
            </div>

            <!-- INSTRUCTIONS CARD -->
            <div class="form-instructions mt-5">
                <h3 class="text-warning d-flex align-items-center gap-2 mb-3">
                    <i class="fas fa-info-circle"></i> Important Instructions
                </h3>
                <ul class="instructions-list list-unstyled">
                    <li><i class="fas fa-check-circle"></i> Fill all fields marked with * (required)</li>
                    <li><i class="fas fa-check-circle"></i> Ensure your email address is correct</li>
                    <li><i class="fas fa-check-circle"></i> Team details are required for team events</li>
                    <li><i class="fas fa-check-circle"></i> You will receive a confirmation email after submission</li>
                    <li><i class="fas fa-check-circle"></i> Contact us if you face any issues</li>
                </ul>
            </div>

            <!-- FOOTER ACTIONS -->
            <div class="d-flex flex-wrap justify-content-between align-items-center mt-5 pt-4 border-top border-secondary">
                <a href="events.html" class="btn-back mb-2 mb-sm-0">
                    <i class="fas fa-arrow-left"></i> Back to Events
                </a>
                <button class="btn-submit" id="submitFormBtn">
                    <i class="fas fa-paper-plane me-2"></i> Submit Form
                </button>
            </div>
        </div>
    </div>

    <!-- O(1) JAVASCRIPT – CONSTANT-TIME REGISTRATION LOGIC (updated with all events from events.html) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function() {
            "use strict";
            // ========== UPDATED CONSTANT-TIME LOOKUP – matching events.html exactly ==========
            
            // ----- FORM URLS (O(1) hash) – All events from events.html with their specific Google Form links -----
            const GOOGLE_FORMS = {
                // Technical & Coding Events
                'Hackathon': 'https://docs.google.com/forms/d/e/1FAIpQLSehLA5jI8zMI-cQxLo1a53FkMzVQfljQhguLzsh9Ec4frhnNg/viewform?embedded=true',
                'AI & ML Model Contest': 'https://docs.google.com/forms/d/e/1FAIpQLScVGBoWXZY0Ym-RTzFH03yVXbQPzf6iO0uE4r_mvSPnbl7eng/viewform?embedded=truer',
                'Mobile App Development': 'https://docs.google.com/forms/d/e/1FAIpQLSd5qEC1hq6C-ifvZGE_PvP66kcWfXpFVWPpOVgnDPtl1H628w/viewform?embedded=true',
                'Web Design Contest': 'https://docs.google.com/forms/d/e/1FAIpQLSfNaiOV2dnV7cwQbys0GsHpDRZBJVyIQDQ8zj6I4Hnmg1XD6g/viewform?embedded=true',
                'IoT Innovation Challenge': 'https://docs.google.com/forms/d/e/1FAIpQLSeBrM1Tnnu7dZBRSRlIU0IbpJbOruJYIrWM2GngBVHTm8JGCA/viewform?embedded=true',
                'CAD Designing Contest': 'https://docs.google.com/forms/d/e/1FAIpQLSem3b7ydURtNEnptcEJH_4t7QeF0gTFj81ToRf_62kUMP2cqw/viewform?embedded=true',
                
                // Management & Strategy Events
                'Smart Business': 'https://docs.google.com/forms/d/e/1FAIpQLSfwi3WaeNi-bSYQPkKo8gUtcdVrQ4p0OT9UUpJ5ODw0huiWKQ/viewform?embedded=true',
                'Flow Chart Design': 'https://docs.google.com/forms/d/e/1FAIpQLSdVNTbZ76HkVn5y8Gv7gtkaccNZiUViZB7Tt_Et8kjauI8PQw/viewform?embedded=true',
                'Bridge Building': 'https://docs.google.com/forms/d/e/1FAIpQLSc7h41ESK7-ZWcClE1NTtTHyjORAs8Tbhix2mUgz-oyuxug_w/viewform?embedded=true',
                'Tech Debate': 'https://docs.google.com/forms/d/e/1FAIpQLSfhQ8Q5vJ27DpgJ1ngnGYcGU1nKrlwtltSRknTKjb47cnJWHA/viewform?embedded=true',
                'Tech Quiz': 'https://docs.google.com/forms/d/e/1FAIpQLSdMmHoBa-2Smg0PKPbSCw0SX4iH9Myt-8VdYIyUmkzuctgMdA/viewform?embedded=true',
                
                // Robotics & Engineering Events
                'Robo Race': 'https://docs.google.com/forms/d/e/1FAIpQLSeItKyoiPF5LyjfWlZJLZEjqFk1NvHJCVDvWNLLokoTjkBaqA/viewform?embedded=true',
                'Line Follower Robot': 'https://docs.google.com/forms/d/e/1FAIpQLSd067rPbtT0jfa0R37PYsEYDXSJyAhIQ0mxeoLjqjMruqyL0g/viewform?embedded=true',
                'Drone Challenge': 'https://docs.google.com/forms/d/e/1FAIpQLSdFOFHSPtXCoMFedNQZCLAFns3x1I4iWYENPB9KfvwiRlqKLg/viewform?embedded=true',
                
                // Game & Sports Events
                'Treasure Hunt': 'https://docs.google.com/forms/d/e/1FAIpQLSdFOFHSPtXCoMFedNQZCLAFns3x1I4iWYENPB9KfvwiRlqKLg/viewform?embedded=true',
                'Free Fire Max': 'https://docs.google.com/forms/d/e/1FAIpQLSfujOYRDAHwPUG6fzDkzHiLM3z9X4ZIhcxu2Bqbkjnq_Gebrg/viewform?embedded=true',
                'BGMI': 'https://docs.google.com/forms/d/e/1FAIpQLSdPOtcY5ePBu3HhUEqlltijY5FXYJ9ceaqhyi2T1Ame97JqaA/viewform?embedded=true',
                
                // compact names (without spaces)
                'Hackathon': 'https://docs.google.com/forms/d/e/1FAIpQLSehLA5jI8zMI-cQxLo1a53FkMzVQfljQhguLzsh9Ec4frhnNg/viewform?embedded=true',
                'AI & ML Model Contest': 'https://docs.google.com/forms/d/e/1FAIpQLScVGBoWXZY0Ym-RTzFH03yVXbQPzf6iO0uE4r_mvSPnbl7eng/viewform?embedded=truer',
                'Mobile App Development': 'https://docs.google.com/forms/d/e/1FAIpQLSd5qEC1hq6C-ifvZGE_PvP66kcWfXpFVWPpOVgnDPtl1H628w/viewform?embedded=true',
                'Web Design Contest': 'https://docs.google.com/forms/d/e/1FAIpQLSfNaiOV2dnV7cwQbys0GsHpDRZBJVyIQDQ8zj6I4Hnmg1XD6g/viewform?embedded=true',
                'IoT Innovation Challenge': 'https://docs.google.com/forms/d/e/1FAIpQLSeBrM1Tnnu7dZBRSRlIU0IbpJbOruJYIrWM2GngBVHTm8JGCA/viewform?embedded=true',
                'CAD Designing Contest': 'https://docs.google.com/forms/d/e/1FAIpQLSem3b7ydURtNEnptcEJH_4t7QeF0gTFj81ToRf_62kUMP2cqw/viewform?embedded=true',
                'Smart Business': 'https://docs.google.com/forms/d/e/1FAIpQLSfwi3WaeNi-bSYQPkKo8gUtcdVrQ4p0OT9UUpJ5ODw0huiWKQ/viewform?embedded=true',
                'Flow Chart Design': 'https://docs.google.com/forms/d/e/1FAIpQLSdVNTbZ76HkVn5y8Gv7gtkaccNZiUViZB7Tt_Et8kjauI8PQw/viewform?embedded=true',
                'Bridge Building': 'https://docs.google.com/forms/d/e/1FAIpQLSc7h41ESK7-ZWcClE1NTtTHyjORAs8Tbhix2mUgz-oyuxug_w/viewform?embedded=true',
                'Tech Debate': 'https://docs.google.com/forms/d/e/1FAIpQLSfhQ8Q5vJ27DpgJ1ngnGYcGU1nKrlwtltSRknTKjb47cnJWHA/viewform?embedded=true',
                'Tech Quiz': 'https://docs.google.com/forms/d/e/1FAIpQLSdMmHoBa-2Smg0PKPbSCw0SX4iH9Myt-8VdYIyUmkzuctgMdA/viewform?embedded=true',
                'Robo Race': 'https://docs.google.com/forms/d/e/1FAIpQLSeItKyoiPF5LyjfWlZJLZEjqFk1NvHJCVDvWNLLokoTjkBaqA/viewform?embedded=true',
                'Line Follower Robot': 'https://docs.google.com/forms/d/e/1FAIpQLSd067rPbtT0jfa0R37PYsEYDXSJyAhIQ0mxeoLjqjMruqyL0g/viewform?embedded=true',
                'Drone Challenge': 'https://docs.google.com/forms/d/e/1FAIpQLSdFOFHSPtXCoMFedNQZCLAFns3x1I4iWYENPB9KfvwiRlqKLg/viewform?embedded=true',
                'Treasure Hunt': 'https://docs.google.com/forms/d/e/1FAIpQLSdFOFHSPtXCoMFedNQZCLAFns3x1I4iWYENPB9KfvwiRlqKLg/viewform?embedded=true',
                'Free Fire Max': 'https://docs.google.com/forms/d/e/1FAIpQLSfujOYRDAHwPUG6fzDkzHiLM3z9X4ZIhcxu2Bqbkjnq_Gebrg/viewform?embedded=true',
                'BGMI': 'https://docs.google.com/forms/d/e/1FAIpQLSdPOtcY5ePBu3HhUEqlltijY5FXYJ9ceaqhyi2T1Ame97JqaA/viewform?embedded=true',
                'CONTENT CREATION': 'https://docs.google.com/forms/d/e/1FAIpQLSdqxewPXAMvAcTW7KUqFugnevb0QT47QMR5bPYeme9mHWp2Uw/viewform?embedded=true',               
            };
            
            // ----- EVENT DESCRIPTIONS (O(1) lookup) – enriched from events.html cards -----
            const EVENT_DESCRIPTIONS = {
                'Hackathon': '24-hour national level hackathon focusing on AI/ML solutions for real-world problems. Build innovative projects and win exciting prizes.',
                'AI & ML Model Contest': 'Showcase your AI/ML expertise by developing innovative models that solve real-world problems.',
                'Mobile App Development': 'Build innovative mobile applications for Android or iOS platforms. Create functional, user-friendly apps.',
                'Web Design Contest': 'Create stunning, responsive websites from scratch. Showcase your creativity in UI/UX design and front-end development.',
                'IoT Innovation Challenge': 'Build smart, connected devices combining hardware, software, and cloud integration to solve real-world problems.',
                'CAD Designing Contest': 'Demonstrate your technical drawing and 3D modeling skills using CAD software. Create precise engineering drawings.',
                'Smart Business': 'Pitch your innovative business ideas to a panel of judges! Develop smart business models, create compelling presentations.',
                'Flow Chart Design': 'Design clear, logical, and visually appealing flow charts for complex processes. Demonstrate your ability to visualize workflows.',
                'Bridge Building': 'Design and construct a bridge using limited materials. Create structures that maximize strength while minimizing weight.',
                'Tech Debate': 'Engage in intellectual discourse on contemporary technology issues! Debate pressing tech topics, ethical dilemmas.',
                'Tech Quiz': 'Test your knowledge across various technology domains! Compete in this exciting quiz covering programming, CS fundamentals.',
                'Robo Race': 'Design and build racing robots to compete on challenging tracks. Test your robotics engineering skills in speed and control.',
                'Line Follower Robot': 'Design and program an autonomous robot that can follow a complex line track with precision and speed.',
                'Drone Challenge': 'Master the skies with precision flying and aerial maneuvers! Navigate obstacle courses and demonstrate piloting skills.',
                'Treasure Hunt': 'Follow the clues, solve puzzles, and race to find the hidden treasure! A thrilling adventure testing problem-solving and teamwork.',
                'Free Fire Max': 'Battle Royale action at its finest! Compete in the ultimate Free Fire Max tournament with your squad.',
                'BGMI': 'Step into the battleground and prove your dominance in BGMI. Team up, strategize, and fight for survival.',
            };
            
            // ----- CATEGORY ICONS (O(1)) – mapping event category to icon, extended -----
            const CATEGORY_ICONS = {
                'technical': 'fas fa-code',
                'management': 'fas fa-chart-line',
                'robotics': 'fas fa-robot',
                'gaming': 'fas fa-gamepad',
                'workshop': 'fas fa-chalkboard-teacher',
                'cultural': 'fas fa-music',
                'default': 'fas fa-calendar-alt'
            };

            // ----- GET URL PARAMETERS (O(1) direct) -----
            function getUrlParams() {
                const params = new URLSearchParams(window.location.search);
                return {
                    event: params.get('event') || 'Hackathon',
                    date: params.get('date') || '24-25 March 2026',
                    time: params.get('time') || '9:00 AM - 6:00 PM',
                    venue: params.get('venue') || 'Main Auditorium',
                    category: params.get('category') || 'technical'
                };
            }

            // ----- UPDATE PAGE – O(1) DIRECT DOM ASSIGNMENTS -----
            function updatePage() {
                const p = getUrlParams();
                
                // Direct element updates (constant time)
                const titleEl = document.getElementById('eventTitle');
                if (titleEl) titleEl.textContent = p.event + ' Registration';
                
                const dateEl = document.getElementById('eventDate');
                if (dateEl) dateEl.textContent = p.date;
                
                const timeEl = document.getElementById('eventTime');
                if (timeEl) timeEl.textContent = p.time;
                
                const venueEl = document.getElementById('eventVenue');
                if (venueEl) venueEl.textContent = p.venue;
                
                // Description lookup O(1) – try full name first, then compact, fallback to default
                let desc = EVENT_DESCRIPTIONS[p.event];
                if (!desc) desc = EVENT_DESCRIPTIONS[p.event.replace(/\s+/g, '')] || EVENT_DESCRIPTIONS['default'];
                const descEl = document.getElementById('eventDescription');
                if (descEl) descEl.textContent = desc;
                
                // Icon lookup O(1) – based on category param
                const iconClass = CATEGORY_ICONS[p.category] || CATEGORY_ICONS['default'];
                const iconEl = document.getElementById('categoryIcon');
                if (iconEl) iconEl.innerHTML = `<i class="${iconClass}"></i>`;
                
                // Page title
                document.title = p.event + ' Registration - FESTRONIX 2.0';
                
                // Load form O(1) – try full name first, then compact, fallback to default
                const iframe = document.getElementById('googleFormIframe');
                if (iframe) {
                    let formUrl = GOOGLE_FORMS[p.event];
                    if (!formUrl) formUrl = GOOGLE_FORMS[p.event.replace(/\s+/g, '')];
                    if (!formUrl) formUrl = GOOGLE_FORMS['default'];
                    iframe.src = formUrl;
                    iframe.style.opacity = '0'; // will be set to 1 on load
                }
            }

            // ----- SUBMIT FORM (O(1) attempt) -----
            window.submitForm = function() {
                const iframe = document.getElementById('googleFormIframe');
                if (!iframe) return;
                
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    if (iframeDoc.forms.length > 0) {
                        const form = iframeDoc.forms[0];
                        
                        // Check required fields (constant time, small n)
                        const required = iframeDoc.querySelectorAll('input[required], select[required], textarea[required]');
                        let allFilled = true;
                        for (let i = 0; i < required.length; i++) {
                            const input = required[i];
                            if (!input.value.trim()) {
                                allFilled = false;
                                input.style.borderColor = '#ff3366';
                                input.style.boxShadow = '0 0 5px rgba(255,51,102,0.5)';
                            } else {
                                input.style.borderColor = '';
                                input.style.boxShadow = '';
                            }
                        }
                        
                        if (!allFilled) {
                            alert('Please fill all required fields marked with *');
                            return;
                        }
                        
                        form.submit();
                        setTimeout(() => {
                            alert('Registration submitted successfully! You will receive a confirmation email shortly.');
                            window.location.href = 'events.html?registered=true';
                        }, 1000);
                    } else {
                        alert('Form not loaded yet. Please wait a moment and try again.');
                    }
                } catch (e) {
                    console.warn('Cannot access iframe directly. Please submit via Google Form button.');
                    alert('Please submit the form directly within the Google Form iframe. Look for the submit button inside the form.');
                }
            };

            // ----- ATTACH SUBMIT BUTTON O(1) -----
            const submitBtn = document.getElementById('submitFormBtn');
            if (submitBtn) {
                submitBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.submitForm();
                });
            }

            // ----- IFRAME LOAD HANDLER (O(1)) -----
            const iframe = document.getElementById('googleFormIframe');
            if (iframe) {
                iframe.addEventListener('load', function() {
                    this.style.opacity = '1';
                });
            }

            // ----- INITIALIZE ON DOM READY -----
            document.addEventListener('DOMContentLoaded', function() {
                updatePage();
                // iframe already has load listener
            });

            // ----- PREVENT SCROLL ZOOM -----
            let lastTouch = 0;
            document.addEventListener('touchend', function(e) {
                const now = Date.now();
                if (now - lastTouch <= 300) e.preventDefault();
                lastTouch = now;
            }, false);
        })();
    </script>
</body>
</html>